<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<script type="text/javascript" src="js/sjcl.js"></script>
<script type="text/javascript" src="js/private-note.js"></script>
<script>
	function prepareForSubmit() {
		// The id is the reference for the encrypted value on the server
		// but the server doesn't have the password to decrypt
		// The password is in the url given to someone and the decryption
		// happens in javascript so server never sees unencrypted values
		var id = document.getElementById('id');
		id.value = random_string(16);
		// generate password to encrypt with
		var password = random_string(16);
		var value = document.getElementById('value').value;
		var hidden = document.getElementById('encryptedValue');
		// encrypt the value using the password
		hidden.value = encrypt(password, value);
		return false;
	}
</script>
</head>
<body>
	<h3>Private Note</h3>
	<form action="create" method="post"
		onsubmit="return prepareForSubmit()">
		<textarea style="width: 90%; height: 75%" id="value"></textarea><br/> 
		<input type="hidden" id="encryptedValue" name="encryptedValue"></input><br /> 
		<input
			type="hidden" id="id" name="id"></input><br /> 
			<input 
			type="submit" value="Encrypt"></input><br />
	</form>
</body>
</html>
